(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{342:function(t,s,n){"use strict";n.r(s);var a=n(1),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("JS 引擎主要由两部分组成:")]),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("JS 中的内存分为堆内存和栈内存，所有堆栈内存的分配处理，浏览器（引擎）会自行在内部执行")]),t._v(" "),n("p",[t._v("栈内存：")]),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("堆内存：引用值对应的空间\n存储引用类型的（对象：键值对，函数：代码字符串）")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),n("p",[t._v("堆内存释放后，里面存储的值也就会被释放掉。")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),n("p",[t._v("举个例子：")]),t._v(" "),t._m(10),n("p",[t._v("上面的代码执行步骤如下：")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),n("p",[t._v("一开始，我们得到一个空空如也的调用栈。随后，每当有函数被调用都会自动地添加进调用栈，执行完函数体中的代码后，调用栈又会自动地移除这个函数。最后，我们又得到了一个空空如也的调用栈。")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),n("p",[t._v("当我们的引擎开始执行这段代码的时候，它从 foo 函数开始。然后这是个递归的函数，并且在没有任何的终止条件的情况下开始调用自己。因此，每执行一步，就会把这个相同的函数一次又一次地添加到调用堆栈中。")]),t._v(" "),t._m(21),t._v(" "),n("p",[t._v("然后，在某一时刻，调用栈中的函数调用的数量超过了调用栈的实际大小，浏览器决定干掉它，抛出一个错误：")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),n("p",[t._v("全局作用域会在页面关闭或者刷新的时候释放。（栈内存释放后，存储在栈内存中的值也都会销毁。\n）")]),t._v(" "),n("p",[t._v("私有作用域：一般情况下，当函数执行完成，所形成的私有作用域（栈内存）都会自动释放掉，但是也有特殊的情况。")]),t._v(" "),n("p",[t._v("函数执行完成，当前形成的栈内存中，某些内容被栈内存意外的变量一直占用，此时栈内存不能释放，栈内存中存储的基本值也不会被释放，一直保存下来。最典型的就是闭包。")]),t._v(" "),t._m(24),t._m(25),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Glossary/Call_stack",target:"_blank",rel:"noopener noreferrer"}},[t._v("调用栈"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5a05b4576fb9a04519690d42",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript 如何工作：对引擎、运行时、调用堆栈的概述"),n("OutboundLink")],1)])]),t._v(" "),n("common-Quote",[t._v("生命的意义不仅是活着，而是我们给别人的生命带来了何种不同。")])],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://i.loli.net/2019/02/20/5c6cc276c6ef5.jpg",alt:"enter description here"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"堆栈内存的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#堆栈内存的作用","aria-hidden":"true"}},[this._v("#")]),this._v(" 堆栈内存的作用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("内存堆：这是内存分配发生的地方")]),this._v(" "),s("li",[this._v("调用栈：这是你的代码执行时的地方")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("提供一个供 JS 代码自上而下执行的环境（作用域，代码都是在栈内存中执行的）")]),this._v(" "),s("li",[this._v("由于基本类型比较简单，它们都是直接在栈内存中开辟一个位置，直接把值存储进去的")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"堆内存的释放"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#堆内存的释放","aria-hidden":"true"}},[this._v("#")]),this._v(" 堆内存的释放")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("让所有引用堆内存空间地址的变量赋值为 "),s("code",[this._v("null")]),this._v(" 即可，当堆内存没有被任何的变量或者其他东西引用时，就会在浏览器执行垃圾回收的时候，被销毁掉。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"调用栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调用栈","aria-hidden":"true"}},[this._v("#")]),this._v(" 调用栈")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("JavaScript 是一门单线程的语言，这意味着它"),s("strong",[this._v("只有一个调用栈")]),this._v("，因此，它同一时间只能做一件事。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("调用栈是一种数据结构，是"),s("strong",[this._v("解释器（引擎）追踪函数执行流的一种机制")]),this._v("，记录现在执行到程序的哪个位置。每当我们运行到一个函数，它就会将其放置到栈顶。当从这个函数返回的时候，就会将这个函数从栈顶弹出，这就是调用栈做的事情。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("每调用一个函数，解释器就会把该函数添加进调用栈并开始执行。")]),this._v(" "),s("li",[this._v("正在调用栈中执行的函数还调用了其它函数，那么新函数也将会被添加进调用栈，一旦这个函数被调用，便会立即执行。")]),this._v(" "),s("li",[this._v("当前函数执行完毕后，解释器将其清出调用栈，继续执行当前执行环境下的剩余的代码。")]),this._v(" "),s("li",[this._v("当分配的调用栈空间被占满时，会引发“堆栈溢出”。")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("greeting")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [1] Some codes here")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHi")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [2] Some codes here")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHi")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hi!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用 `greeting` 函数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("greeting")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [3] Some codes here")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("忽略前面所有函数声明（函数声明会保存在堆内存中），直到 greeting() 函数被调用")]),this._v(" "),s("li",[this._v("把 greeting() 添加进调用栈列表")]),this._v(" "),s("li",[this._v("执行 greeting() 函数体中的所有代码")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("此时调用栈列表:")]),this._v(" "),s("ul",[s("li",[this._v("greeting")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("代码执行到 sayHi() 时，该函数被调用")]),this._v(" "),s("li",[this._v("把 sayHi() 添加进调用栈列表")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("此时调用栈列表:")]),this._v(" "),s("ul",[s("li",[this._v("sayHi")]),this._v(" "),s("li",[this._v("greeting")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("执行 sayHi() 函数体中的代码，直到全部执行完毕")]),this._v(" "),s("li",[this._v("继续执行 greeting() 函数体中 sayHi() 后面的代码")]),this._v(" "),s("li",[this._v("弹出调用栈列表中的 sayHi() 函数")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("调用栈列表:")]),this._v(" "),s("ul",[s("li",[this._v("greeting")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"9"}},[s("li",[this._v("当 greeting() 函数体中的代码全部执行完毕，返回到调用 greeting() 的代码行，继续执行剩余JS代码。")]),this._v(" "),s("li",[this._v("弹出调用栈列表中的 greeting() 函数")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"堆栈溢出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#堆栈溢出","aria-hidden":"true"}},[this._v("#")]),this._v(" 堆栈溢出")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v('"'),s("strong",[this._v("堆栈溢出")]),this._v('"，当你达到调用栈最大的大小的时候就会发生这种情况。')])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://i.loli.net/2019/02/20/5c6cc74903d40.jpg",alt:"enter description here"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://i.loli.net/2019/02/20/5c6cc77d64d26.jpg",alt:"enter description here"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"栈内存的释放"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#栈内存的释放","aria-hidden":"true"}},[this._v("#")]),this._v(" 栈内存的释放")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" f "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=> i = 2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>7, i = 2 n =3，执行 n + (++i) => 3 + 3 = 6")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>12, i = 5 n = 6，执行 n + (++i) => 6 + 6 = 12")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>16, i = 7 n = 8，执行 n + (++i) => 8 + 8 = 16")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>8, i = 3 n = 4，执行 n + (++i) => 4 + 4 = 8")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])}],!1,null,null,null);s.default=e.exports}}]);