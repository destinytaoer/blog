<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Canvas 画布 | destiny&#39;Note</title>
    <meta name="description" content="生命的意义不仅是活着，而是我们给别人的生命带来了何种不同。">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.addef09d.css" as="style"><link rel="preload" href="/assets/js/app.0f9f7e67.js" as="script"><link rel="preload" href="/assets/js/4.b18b3d4f.js" as="script"><link rel="preload" href="/assets/js/2.ab4e59f5.js" as="script"><link rel="preload" href="/assets/js/1.6965be2c.js" as="script"><link rel="preload" href="/assets/js/17.012dd392.js" as="script"><link rel="preload" href="/assets/js/6.f07dc061.js" as="script"><link rel="preload" href="/assets/js/12.237ff193.js" as="script"><link rel="prefetch" href="/assets/js/10.187926d2.js"><link rel="prefetch" href="/assets/js/11.1eb27b75.js"><link rel="prefetch" href="/assets/js/13.18ed5860.js"><link rel="prefetch" href="/assets/js/14.99e2e4eb.js"><link rel="prefetch" href="/assets/js/15.bc06526f.js"><link rel="prefetch" href="/assets/js/16.8e4d78b7.js"><link rel="prefetch" href="/assets/js/18.3b692a4b.js"><link rel="prefetch" href="/assets/js/19.b7cc7edf.js"><link rel="prefetch" href="/assets/js/20.2bcff421.js"><link rel="prefetch" href="/assets/js/21.561bedb6.js"><link rel="prefetch" href="/assets/js/22.d3bd9b2c.js"><link rel="prefetch" href="/assets/js/23.3dad05e8.js"><link rel="prefetch" href="/assets/js/24.90111790.js"><link rel="prefetch" href="/assets/js/25.e9002f4c.js"><link rel="prefetch" href="/assets/js/26.8bf2f8ef.js"><link rel="prefetch" href="/assets/js/27.8b1f0657.js"><link rel="prefetch" href="/assets/js/28.2e4fb5f4.js"><link rel="prefetch" href="/assets/js/29.8c80651f.js"><link rel="prefetch" href="/assets/js/30.dfd74c47.js"><link rel="prefetch" href="/assets/js/31.d162de4e.js"><link rel="prefetch" href="/assets/js/32.8fa3e509.js"><link rel="prefetch" href="/assets/js/33.0102190a.js"><link rel="prefetch" href="/assets/js/34.d9b72b77.js"><link rel="prefetch" href="/assets/js/35.f3ef1e14.js"><link rel="prefetch" href="/assets/js/36.08ee273c.js"><link rel="prefetch" href="/assets/js/37.43f60d75.js"><link rel="prefetch" href="/assets/js/38.b5b65491.js"><link rel="prefetch" href="/assets/js/39.140ad520.js"><link rel="prefetch" href="/assets/js/40.20e9a437.js"><link rel="prefetch" href="/assets/js/41.d6071314.js"><link rel="prefetch" href="/assets/js/42.a26abb63.js"><link rel="prefetch" href="/assets/js/43.eb36ee3d.js"><link rel="prefetch" href="/assets/js/44.b48516ef.js"><link rel="prefetch" href="/assets/js/45.2a99686d.js"><link rel="prefetch" href="/assets/js/46.daa850ee.js"><link rel="prefetch" href="/assets/js/47.bf990a4f.js"><link rel="prefetch" href="/assets/js/48.1c0e9622.js"><link rel="prefetch" href="/assets/js/49.b10e9c88.js"><link rel="prefetch" href="/assets/js/5.27491d6c.js"><link rel="prefetch" href="/assets/js/50.0eccc3ba.js"><link rel="prefetch" href="/assets/js/51.6b9e5b3a.js"><link rel="prefetch" href="/assets/js/52.861e9435.js"><link rel="prefetch" href="/assets/js/53.22d6884a.js"><link rel="prefetch" href="/assets/js/54.4e991d69.js"><link rel="prefetch" href="/assets/js/55.ac350fe9.js"><link rel="prefetch" href="/assets/js/56.826e0e48.js"><link rel="prefetch" href="/assets/js/57.1f64810c.js"><link rel="prefetch" href="/assets/js/58.e8c3549c.js"><link rel="prefetch" href="/assets/js/59.71ab3e75.js"><link rel="prefetch" href="/assets/js/60.5d8abbc2.js"><link rel="prefetch" href="/assets/js/61.64758485.js"><link rel="prefetch" href="/assets/js/62.8399572d.js"><link rel="prefetch" href="/assets/js/63.5c244dba.js"><link rel="prefetch" href="/assets/js/64.bb6c6c2c.js"><link rel="prefetch" href="/assets/js/65.44300fbf.js"><link rel="prefetch" href="/assets/js/66.893f4290.js"><link rel="prefetch" href="/assets/js/67.abb98920.js"><link rel="prefetch" href="/assets/js/68.096fd403.js"><link rel="prefetch" href="/assets/js/69.d386d194.js"><link rel="prefetch" href="/assets/js/7.67f8ace6.js"><link rel="prefetch" href="/assets/js/70.afcfe2be.js"><link rel="prefetch" href="/assets/js/71.0a25ec97.js"><link rel="prefetch" href="/assets/js/8.33eb3928.js"><link rel="prefetch" href="/assets/js/9.cccf5cfc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.addef09d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="destiny'Note" class="logo"> <span class="site-name can-hide">destiny'Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/visualization/" class="nav-link">数据可视化</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端手册</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/js.html" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/frontend/css.html" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/vue.html" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/frontend/react.html" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/frontend/ts.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/frontend/node.html" class="nav-link">Node</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.yuque.com/destinytaoer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  语雀
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <a href="https://github.com/destinytaoer/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/visualization/" class="nav-link">数据可视化</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端手册</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/js.html" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/frontend/css.html" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/vue.html" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/frontend/react.html" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/frontend/ts.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/frontend/node.html" class="nav-link">Node</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.yuque.com/destinytaoer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  语雀
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <a href="https://github.com/destinytaoer/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Canvas 画布</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#一、简介" class="sidebar-link">一、简介</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#二、html-部分" class="sidebar-link">二、HTML 部分</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#三、绘图上下文环境" class="sidebar-link">三、绘图上下文环境</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#四、路径" class="sidebar-link">四、路径</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_4-1-beginpath-开始新路径" class="sidebar-link">4.1 beginPath() 开始新路径</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_4-2-closepath-结束路径" class="sidebar-link">4.2 closePath() 结束路径</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_4-3-stroke-绘制路径" class="sidebar-link">4.3 stroke() 绘制路径</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_4-4-fill-填充路径" class="sidebar-link">4.4 fill() 填充路径</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_4-5-ispointinpath-是否在路径中" class="sidebar-link">4.5 isPointInPath()	是否在路径中</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_4-6-clip-剪切" class="sidebar-link">4.6 clip() 剪切</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#五、线条以及填充颜色" class="sidebar-link">五、线条以及填充颜色</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_5-1-fillstyle-填充样式" class="sidebar-link">5.1 fillStyle 填充样式</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_5-2-strokestyle-线条样式" class="sidebar-link">5.2 strokeStyle 线条样式</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_5-3-linecap-线条结束端点样式" class="sidebar-link">5.3 lineCap 线条结束端点样式</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_5-4-linejoin-线条拐角类型" class="sidebar-link">5.4 lineJoin 线条拐角类型</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_5-5-linewidth-线条宽度" class="sidebar-link">5.5 lineWidth 线条宽度</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_5-6-miterlimit-线条最大斜接长度" class="sidebar-link">5.6 miterLimit 线条最大斜接长度</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#六、直线路径" class="sidebar-link">六、直线路径</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_6-1-moveto-起点坐标" class="sidebar-link">6.1 moveTo() 起点坐标</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_6-2-lineto-终点坐标" class="sidebar-link">6.2 lineTo() 终点坐标</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_6-3-多边形" class="sidebar-link">6.3 多边形</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#七、贝塞尔曲线" class="sidebar-link">七、贝塞尔曲线</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_7-1-quadraticcurveto-二次贝塞尔" class="sidebar-link">7.1 quadraticCurveTo() 二次贝塞尔</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_7-2-beziercurveto-三次贝塞尔" class="sidebar-link">7.2 bezierCurveTo() 三次贝塞尔</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#八、画弧线、圆" class="sidebar-link">八、画弧线、圆</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_8-1-arc-创建圆路径" class="sidebar-link">8.1 arc() 创建圆路径</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_8-2-arcto-两切线弧" class="sidebar-link">8.2 arcTo() 两切线弧</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_8-3-绘制" class="sidebar-link">8.3 绘制</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_8-4-圆" class="sidebar-link">8.4 圆</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#九、文本" class="sidebar-link">九、文本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_9-1-filltext-填充文本" class="sidebar-link">9.1 fillText() 填充文本</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_9-2-stroketext-描边文本" class="sidebar-link">9.2 strokeText() 描边文本</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_9-3-measuretext-测量文本宽度" class="sidebar-link">9.3 measureText() 测量文本宽度</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_9-4-font-字体样式" class="sidebar-link">9.4 font 字体样式</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_9-5-textalign-对齐方式" class="sidebar-link">9.5 textAlign 对齐方式</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_9-6-textbaseline-相对于起点的位置" class="sidebar-link">9.6 textBaseline 相对于起点的位置</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十、矩形" class="sidebar-link">十、矩形</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_10-1-rect-创建矩形" class="sidebar-link">10.1 rect() 创建矩形</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_10-2-fillrect-已填充矩形" class="sidebar-link">10.2 fillRect() 已填充矩形</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_10-3-strokerect-已描边矩形" class="sidebar-link">10.3 strokeRect() 已描边矩形</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_10-4-clearrect-清空矩形区域" class="sidebar-link">10.4 clearRect() 清空矩形区域</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十一、添加图片" class="sidebar-link">十一、添加图片</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_11-1-drawimage-添加图片" class="sidebar-link">11.1  drawImage() 添加图片</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_11-2-图片对象" class="sidebar-link">11.2 图片对象</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十二、特殊样式" class="sidebar-link">十二、特殊样式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-1-shadowcolor-阴影颜色" class="sidebar-link">12.1 shadowColor 阴影颜色</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-2-shadowblur-阴影模糊程度" class="sidebar-link">12.2 shadowBlur 阴影模糊程度</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-3-shadowoffsetx-阴影水平偏移" class="sidebar-link">12.3 shadowOffsetX 阴影水平偏移</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-4-shadowoffsety-阴影垂直偏移" class="sidebar-link">12.4 shadowOffsetY 阴影垂直偏移</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-5-createpattern-重复" class="sidebar-link">12.5 createPattern()  重复</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-6-createlineargradient-创建线性渐变" class="sidebar-link">12.6 createLinearGradient() 创建线性渐变</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-7-createradialgradient-创建径向渐变" class="sidebar-link">12.7 createRadialGradient() 创建径向渐变</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-8-addcolorstop-添加色标" class="sidebar-link">12.8 addColorStop() 添加色标</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_12-9-绘制渐变" class="sidebar-link">12.9 绘制渐变</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十三、转换" class="sidebar-link">十三、转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_13-1-scale-缩放" class="sidebar-link">13.1 scale() 缩放</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_13-2-rotate-旋转" class="sidebar-link">13.2 rotate() 旋转</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_13-3-translate-改变原点坐标" class="sidebar-link">13.3 translate() 改变原点坐标</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_13-4-transform-变换矩阵" class="sidebar-link">13.4 transform() 变换矩阵</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_13-5-settransform" class="sidebar-link">13.5 setTransform()</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_13-6-save-、-restore" class="sidebar-link">13.6 save()、 restore()</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十四-imagedata-对象" class="sidebar-link">十四 ImageData 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_14-1-createimagedata-创建-imagedata-对象" class="sidebar-link">14.1 createImageData() 创建 ImageData 对象</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_14-2-getimagedata-复制画布像素数据" class="sidebar-link">14.2 getImageData() 复制画布像素数据</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_14-3-putimagedata-放入像素数据" class="sidebar-link">14.3 putImageData() 放入像素数据</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_14-4-width、height宽高" class="sidebar-link">14.4 width、height宽高</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_14-5-data-图像数据" class="sidebar-link">14.5 data 图像数据</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十五、合成" class="sidebar-link">十五、合成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_15-1-globalalpha透明度" class="sidebar-link">15.1 globalAlpha	透明度</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_15-2-globalcompositeoperation" class="sidebar-link">15.2 globalCompositeOperation</a></li></ul></li><li><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#十六、兼容ie" class="sidebar-link">十六、兼容IE</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_16-1-explorercanvas——excanvas-js" class="sidebar-link">16.1 ExplorerCanvas——excanvas.js</a></li><li class="sidebar-sub-header"><a href="/2017/10/canvas%E7%94%BB%E5%B8%83/#_16-2-限制" class="sidebar-link">16.2 限制</a></li></ul></li></ul></section></li></ul> </aside> <div class="custom-layout"><main class="post"> <div class="content default"><h2 id="一、简介"><a href="#一、简介" aria-hidden="true" class="header-anchor">#</a> 一、简介</h2> <blockquote><p>HTML5 中的定义：“它是依赖分辨率的位图画布，你可以在 canvas 上面绘制任何图形，甚至加载照片。”</p></blockquote> <ul><li><strong>矩形空白区域</strong></li> <li><strong>通过 javascript 绘制图形</strong></li> <li><strong>可以加载图片</strong></li></ul> <blockquote><p><a href="https://codepen.io/destiny0904/pen/XzrZrv" target="_blank" rel="noopener noreferrer">canvas 坐标系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="二、html-部分"><a href="#二、html-部分" aria-hidden="true" class="header-anchor">#</a> 二、HTML 部分</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;canvas id=&quot;a&quot; width=&quot;300&quot; height=&quot;300&quot;&gt;您的浏览器不支持 canvas&lt;/canvas&gt;
</code></pre></div><p>简单的在 HTML 页面添加一个 <code>canvas</code> 元素，设定宽高，添加 <code>id</code> 便于 <code>javascript</code> 获取。</p> <ul><li>每个 <code>canvas</code> 初始都是一个白板。</li> <li>样式除了宽高，尽量写在画布里，而不是使用 CSS</li> <li><code>canvas</code> 标签里如果添加文本，那么当浏览器不支持 <code>canvas</code> 时显示文本</li></ul> <h2 id="三、绘图上下文环境"><a href="#三、绘图上下文环境" aria-hidden="true" class="header-anchor">#</a> 三、绘图上下文环境</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a_context <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>获取到 <code>canvas</code> 元素</li> <li>调用它的 <code>getContext()</code> 方法获取绘图上下文环境，参数必须为 <code>2d</code> ，未来可能会有 <code>3d</code></li> <li>基于上下文环境的方法进行绘图</li></ul> <p>绘图上下文包含所有绘制方法和属性的定义。</p> <h2 id="四、路径"><a href="#四、路径" aria-hidden="true" class="header-anchor">#</a> 四、路径</h2> <h3 id="_4-1-beginpath-开始新路径"><a href="#_4-1-beginpath-开始新路径" aria-hidden="true" class="header-anchor">#</a> 4.1 <code>beginPath()</code> 开始新路径</h3> <p>表示重新开始新的路径。</p> <p>canvas 是基于状态的绘图，开启一条新的路径，就可以设置新的状态。但是 <code>beginPath()</code> 不会将状态重置回默认值。</p> <blockquote><p>**同一条路径上的线条和曲线都会是相同的颜色。**所以需要绘制不同颜色的时候，必须开启新的路径。</p></blockquote> <h3 id="_4-2-closepath-结束路径"><a href="#_4-2-closepath-结束路径" aria-hidden="true" class="header-anchor">#</a> 4.2 <code>closePath()</code> 结束路径</h3> <p>用于结束路径，与 <code>beginPath()</code> 并不一定成对出现。</p> <blockquote><p><strong>注意</strong>：默认结束路径后，图形自动封闭，即首尾相连。所以有些时候不会用到结束路径。</p></blockquote> <h3 id="_4-3-stroke-绘制路径"><a href="#_4-3-stroke-绘制路径" aria-hidden="true" class="header-anchor">#</a> 4.3 <code>stroke()</code> 绘制路径</h3> <p>绘制已定义的路径</p> <h3 id="_4-4-fill-填充路径"><a href="#_4-4-fill-填充路径" aria-hidden="true" class="header-anchor">#</a> 4.4 <code>fill()</code> 填充路径</h3> <p>将准备画的路径块填充</p> <p><code>fill()</code> 会覆盖描边 <code>stroke()</code> 边框的一半。所以，在需要描边的填充色，需要先填充，后描边。</p> <h3 id="_4-5-ispointinpath-是否在路径中"><a href="#_4-5-ispointinpath-是否在路径中" aria-hidden="true" class="header-anchor">#</a> 4.5 <code>isPointInPath()</code>	是否在路径中</h3> <p>如果指定的点位于当前路径中，则返回 true，否则返回 false</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">isPointInPath</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>x</code> 测试点的 x 坐标</li> <li><code>y</code> 测试点的 y 坐标</li></ul> <h3 id="_4-6-clip-剪切"><a href="#_4-6-clip-剪切" aria-hidden="true" class="header-anchor">#</a> 4.6 <code>clip()</code> 剪切</h3> <p>从原始画布剪切任意形状和尺寸的区域</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>注意</strong>：一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内（不能访问画布上的其他区域）。您也可以在使用 <code>clip()</code> 方法前通过使用 <code>save()</code> 方法对当前画布区域进行保存，并在以后的任意时间通过 <code>restore()</code> 方法进行恢复。</p></blockquote> <h2 id="五、线条以及填充颜色"><a href="#五、线条以及填充颜色" aria-hidden="true" class="header-anchor">#</a> 五、线条以及填充颜色</h2> <h3 id="_5-1-fillstyle-填充样式"><a href="#_5-1-fillstyle-填充样式" aria-hidden="true" class="header-anchor">#</a> 5.1 <code>fillStyle</code> 填充样式</h3> <p>设置或返回用于填充绘画的颜色、渐变或模式，需要在填充前声明才有效</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span>color<span class="token operator">|</span>gradient<span class="token operator">|</span>pattern<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>color</code> 指示绘图填充色的 CSS 颜色值。默认值是 #000000。</li> <li><code>gradient</code> 用于填充绘图的渐变对象</li> <li><code>pattern</code> 用于填充绘图的 <code>pattern</code> 对象</li></ul> <h3 id="_5-2-strokestyle-线条样式"><a href="#_5-2-strokestyle-线条样式" aria-hidden="true" class="header-anchor">#</a> 5.2 <code>strokeStyle</code> 线条样式</h3> <p>设置或返回用于笔触的颜色、渐变或模式，需要在绘制前声明才有效</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span>color<span class="token operator">|</span>gradient<span class="token operator">|</span>pattern<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>color</code> 指示绘图笔触颜色的 CSS 颜色值。默认值是 #000000。</li> <li><code>gradient</code> 用于填充绘图的渐变对象</li> <li><code>pattern</code> 用于创建 <code>pattern</code> 笔触的 <code>pattern</code> 对象</li></ul> <h3 id="_5-3-linecap-线条结束端点样式"><a href="#_5-3-linecap-线条结束端点样式" aria-hidden="true" class="header-anchor">#</a> 5.3 <code>lineCap</code> 线条结束端点样式</h3> <p>设置或返回线条的结束端点样式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>lineCap<span class="token operator">=</span><span class="token string">&quot;butt|round|square&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>butt</code> 默认。向线条的每个末端添加平直的边缘。</li> <li><code>round</code> 向线条的每个末端添加圆形线帽。</li> <li><code>square</code> 向线条的每个末端添加正方形线帽。</li></ul> <p><code>round</code> 和 <code>square</code> 会使线条略微变长。</p> <h3 id="_5-4-linejoin-线条拐角类型"><a href="#_5-4-linejoin-线条拐角类型" aria-hidden="true" class="header-anchor">#</a> 5.4 <code>lineJoin</code> 线条拐角类型</h3> <p>设置或返回两条线相交时，所创建的拐角类型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>lineJoin<span class="token operator">=</span><span class="token string">&quot;bevel|round|miter&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>bevel</code> 创建斜角</li> <li><code>round</code> 创建圆角</li> <li><code>miter</code> 默认。创建尖角</li></ul> <h3 id="_5-5-linewidth-线条宽度"><a href="#_5-5-linewidth-线条宽度" aria-hidden="true" class="header-anchor">#</a> 5.5 <code>lineWidth</code> 线条宽度</h3> <p>设置或返回当前的线条宽度</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>lineWidth<span class="token operator">=</span>number<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>number</code> 当前线条的宽度，以像素计</li></ul> <h3 id="_5-6-miterlimit-线条最大斜接长度"><a href="#_5-6-miterlimit-线条最大斜接长度" aria-hidden="true" class="header-anchor">#</a> 5.6 <code>miterLimit</code> 线条最大斜接长度</h3> <p>设置或返回最大斜接长度</p> <div class="language- extra-class"><pre class="language-text"><code>context.miterLimit=number;
</code></pre></div><ul><li><code>number</code> 正数
如果斜接长度超过 <code>miterLimit</code> 的值，边角会以 <code>lineJoin</code> 的 <code>bevel</code> 类型来显示。</li></ul> <p>斜接长度指的是在两条线交汇处内角和外角之间的距离。
<img src="http://upload-images.jianshu.io/upload_images/7295449-362921d854de0641.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>只有当 <code>lineJoin</code> 属性为 <code>miter</code> 时，<code>miterLimit</code> 才有效。</p> <p>边角的角度越小，斜接长度就会越大。
为了避免斜接长度过长，我们可以使用 miterLimit 属性。
如果斜接长度超过 miterLimit 的值，边角会以 lineJoin 的 &quot;bevel&quot; 类型来显示（图解 3）：
<img src="http://upload-images.jianshu.io/upload_images/7295449-e3a1557002561d6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <h2 id="六、直线路径"><a href="#六、直线路径" aria-hidden="true" class="header-anchor">#</a> 六、直线路径</h2> <h3 id="_6-1-moveto-起点坐标"><a href="#_6-1-moveto-起点坐标" aria-hidden="true" class="header-anchor">#</a> 6.1 <code>moveTo()</code> 起点坐标</h3> <p>把路径移动到画布中的指定点，不创建线条。声明直线开始的起点坐标。括号里面填写坐标。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-2-lineto-终点坐标"><a href="#_6-2-lineto-终点坐标" aria-hidden="true" class="header-anchor">#</a> 6.2 <code>lineTo()</code> 终点坐标</h3> <p>声明直线结束的终点坐标。括号里面填写坐标。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//起点</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//终点</span>
</code></pre></div><p>连续出现相当于以前一个为起点继续走向另一个坐标。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//起点 </span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//终点</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//以前一个终点为起点坐标</span>
</code></pre></div><p>当 <code>lineTo()</code> 在 <code>beginPath()</code> 后面使用时，可以代替 <code>moveTo()</code>，和 <code>moveTo()</code> 起到相同效果。</p> <h3 id="_6-3-多边形"><a href="#_6-3-多边形" aria-hidden="true" class="header-anchor">#</a> 6.3 多边形</h3> <p>从 <code>moveTo()</code> 开始，使用 <code>lineTo()</code> 画直线到三个顶点，最终回到起点坐标。</p> <p>如三角形：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//路径描述</span>
context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//绘制</span>
context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="七、贝塞尔曲线"><a href="#七、贝塞尔曲线" aria-hidden="true" class="header-anchor">#</a> 七、贝塞尔曲线</h2> <h3 id="_7-1-quadraticcurveto-二次贝塞尔"><a href="#_7-1-quadraticcurveto-二次贝塞尔" aria-hidden="true" class="header-anchor">#</a> 7.1 quadraticCurveTo() 二次贝塞尔</h3> <p>通过使用表示二次贝塞尔曲线的指定控制点，向当前路径添加一个点。</p> <p>二次贝塞尔曲线需要两个点。第一个点是用于二次贝塞尔计算中的控制点，第二个点是曲线的结束点。最后添加的是结束点
<img src="http://upload-images.jianshu.io/upload_images/7295449-19d53fa232d3041c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <blockquote><p><strong>注意</strong>：曲线的开始点是当前路径中最后一个点。如果路径不存在，那么请使用 <code>beginPath()</code> 和 <code>moveTo()</code> 方法来定义开始点。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span>cpx<span class="token punctuation">,</span>cpy<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>cpx</code>，<code>cpy</code> 贝塞尔控制点的坐标</li> <li><code>x</code>，<code>y</code> 结束点的坐标</li></ul> <h3 id="_7-2-beziercurveto-三次贝塞尔"><a href="#_7-2-beziercurveto-三次贝塞尔" aria-hidden="true" class="header-anchor">#</a> 7.2 bezierCurveTo() 三次贝塞尔</h3> <p>通过使用表示三次贝塞尔曲线的指定控制点，向当前路径添加一个点。</p> <p>三次贝塞尔曲线需要三个点。前两个点是用于三次贝塞尔计算中的控制点，第三个点是曲线的结束点。
<img src="http://upload-images.jianshu.io/upload_images/7295449-64bd89bb9ef9ff9f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span>cp1x<span class="token punctuation">,</span>cp1y<span class="token punctuation">,</span>cp2x<span class="token punctuation">,</span>cp2y<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>cp1x</code>，<code>cp1y</code> 第一个贝塞尔控制点的坐标</li> <li><code>cp2x</code>，<code>cp2y</code> 第二个贝塞尔控制点的坐标</li> <li><code>x</code>，<code>y</code> 结束点的坐标</li></ul> <h2 id="八、画弧线、圆"><a href="#八、画弧线、圆" aria-hidden="true" class="header-anchor">#</a> 八、画弧线、圆</h2> <h3 id="_8-1-arc-创建圆路径"><a href="#_8-1-arc-创建圆路径" aria-hidden="true" class="header-anchor">#</a> 8.1 <code>arc()</code> 创建圆路径</h3> <p>创建弧/曲线（用于创建圆形或部分圆）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>centerX<span class="token punctuation">,</span> centerY<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> startingAngle<span class="token punctuation">,</span> endingAngle<span class="token punctuation">,</span> anticlockwise<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>centerx</code> , <code>centery</code> 表示圆心位置</li> <li><code>radius</code>表示半径</li> <li><code>startingAngle</code>，<code>endingAngle</code>表示开始位置和结束位置</li> <li><code>anticlockwise</code> 表示 <code>true</code> 时为顺时针绘制，<code>false</code> 为逆时针绘制。默认为 <code>true</code></li></ul> <p><img src="http://upload-images.jianshu.io/upload_images/7295449-23af3c75542c56c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>其中角度参数的值：<code>0</code> 表示圆的最右边，<code>0.5*Math.PI</code> 表示最下面，<code>1*Math.PI</code> 表示最左边，<code>1.5*Math.PI</code> 表示最上面，<code>2*Math.PI</code> 表示最右边。这些规定是固定的，不会因为顺逆时针改变。</p> <h3 id="_8-2-arcto-两切线弧"><a href="#_8-2-arcto-两切线弧" aria-hidden="true" class="header-anchor">#</a> 8.2 <code>arcTo()</code> 两切线弧</h3> <p>创建两切线之间的弧/曲线</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://upload-images.jianshu.io/upload_images/7295449-86648c65a1bb3be9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <ul><li><code>x1</code>，<code>y1</code> 弧的起点坐标</li> <li><code>x2</code>，<code>y2</code> 弧的终点坐标</li> <li><code>r</code> 弧的半径</li></ul> <p>使用 <code>stroke()</code> 方法在画布上绘制确切的弧。</p> <h3 id="_8-3-绘制"><a href="#_8-3-绘制" aria-hidden="true" class="header-anchor">#</a> 8.3 绘制</h3> <ul><li><code>lineWidth</code> 定义线条粗细</li> <li><code>strokeStyle</code> 定义描边样式</li> <li><code>stroke()</code> 描边</li> <li><code>fillStyle</code> 定义填充样式</li> <li><code>fill()</code> 填充</li></ul> <h3 id="_8-4-圆"><a href="#_8-4-圆" aria-hidden="true" class="header-anchor">#</a> 8.4 圆</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>表示从右边（0）开始，顺时针画圆，到右边（2 PI）结束。</p> <h2 id="九、文本"><a href="#九、文本" aria-hidden="true" class="header-anchor">#</a> 九、文本</h2> <p>不同于网页中的文本，绘制在 <code>canvas</code> 中的文本是没有盒模型的，没有浮动、边距、留白、自动换行等。</p> <h3 id="_9-1-filltext-填充文本"><a href="#_9-1-filltext-填充文本" aria-hidden="true" class="header-anchor">#</a> 9.1 <code>fillText()</code> 填充文本</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>text</code> 规定在画布上输出的文本</li> <li><code>x</code>，<code>y</code> 开始绘制文本的坐标位置</li></ul> <h3 id="_9-2-stroketext-描边文本"><a href="#_9-2-stroketext-描边文本" aria-hidden="true" class="header-anchor">#</a> 9.2 <code>strokeText()</code> 描边文本</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>maxWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>text</code> 规定在画布上输出的文本</li> <li><code>x</code>，<code>y</code> 开始绘制文本的坐标位置</li> <li><code>maxWidth</code> 可选。允许的最大文本宽度，以像素计</li></ul> <h3 id="_9-3-measuretext-测量文本宽度"><a href="#_9-3-measuretext-测量文本宽度" aria-hidden="true" class="header-anchor">#</a> 9.3 <code>measureText()</code> 测量文本宽度</h3> <p><code>measureText()</code> 方法返回包含一个对象，该对象包含以像素计的指定字体宽度。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">measureText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
</code></pre></div><ul><li>text 要测量的文本</li></ul> <h3 id="_9-4-font-字体样式"><a href="#_9-4-font-字体样式" aria-hidden="true" class="header-anchor">#</a> 9.4 <code>font</code> 字体样式</h3> <p>canvas 中的字体会继承 canvas 元素的字体大小和样式风格。
设置 <code>font</code> 属性覆盖继承值。符合 CSS 规则。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;bold 12px sans-serif&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>属性值里面的每个取值用空格隔开</p> <ul><li>font style</li> <li>font variant</li> <li>font size</li> <li>font weight</li> <li>lineheight</li> <li>font family</li></ul> <blockquote><p>使用相对字体大小，如 <code>1.5em</code> 或 <code>150%</code>，是基于 <code>canvas</code> 元素本身的字体大小。<code>rem</code> 仍是基于根元素。</p></blockquote> <h3 id="_9-5-textalign-对齐方式"><a href="#_9-5-textalign-对齐方式" aria-hidden="true" class="header-anchor">#</a> 9.5 <code>textAlign</code> 对齐方式</h3> <p>类似 CSS 中的 <code>text-align</code> 。</p> <div class="language- extra-class"><pre class="language-text"><code>context.textAlign = &quot;start&quot;;
</code></pre></div><p><img src="http://upload-images.jianshu.io/upload_images/7295449-48960d8c9f4a2373.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>取值：<code>start</code>（默认）、<code>end</code>、<code>left</code>、<code>right</code>、<code>center</code>。</p> <h3 id="_9-6-textbaseline-相对于起点的位置"><a href="#_9-6-textbaseline-相对于起点的位置" aria-hidden="true" class="header-anchor">#</a> 9.6 <code>textBaseline</code> 相对于起点的位置</h3> <p>控制文本相对于起点的位置。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>必须使用引号。</p> <p><img src="http://upload-images.jianshu.io/upload_images/7295449-3419679ba917de7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>取值：<code>top</code>、<code>bottom</code>、<code>hanging</code>、<code>middle</code>、<code>alphabetic</code>、<code>ideographic</code></p> <h2 id="十、矩形"><a href="#十、矩形" aria-hidden="true" class="header-anchor">#</a> 十、矩形</h2> <h3 id="_10-1-rect-创建矩形"><a href="#_10-1-rect-创建矩形" aria-hidden="true" class="header-anchor">#</a> 10.1 <code>rect()</code> 创建矩形</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>x</code>，<code>y</code>	矩形左上角的坐标</li> <li><code>width</code>，<code>height</code> 矩形的宽高</li></ul> <p>使用 <code>stroke()</code> 或 <code>fill()</code> 方法在画布上实际地绘制矩形。</p> <h3 id="_10-2-fillrect-已填充矩形"><a href="#_10-2-fillrect-已填充矩形" aria-hidden="true" class="header-anchor">#</a> 10.2 <code>fillRect()</code> 已填充矩形</h3> <div class="language- extra-class"><pre class="language-text"><code>fillRect(x,y,width,height);
</code></pre></div><ul><li><code>x</code>，<code>y</code> 表示矩形左上角坐标</li> <li><code>width</code>，<code>height</code>表示宽高</li></ul> <p>使用 <code>fillStyle</code> 属性来设置用于填充绘图的颜色、渐变或模式。</p> <h3 id="_10-3-strokerect-已描边矩形"><a href="#_10-3-strokerect-已描边矩形" aria-hidden="true" class="header-anchor">#</a> 10.3 <code>strokeRect()</code> 已描边矩形</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">strokeRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>x</code>，<code>y</code> 表示矩形左上角坐标</li> <li><code>width</code>，<code>height</code>表示宽高</li></ul> <p>使用 <code>strokeStyle</code> 属性来设置笔触的颜色、渐变或模式。</p> <h3 id="_10-4-clearrect-清空矩形区域"><a href="#_10-4-clearrect-清空矩形区域" aria-hidden="true" class="header-anchor">#</a> 10.4 <code>clearRect()</code> 清空矩形区域</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>x</code>，<code>y</code> 表示矩形左上角坐标</li> <li><code>width</code>，<code>height</code>表示宽高</li></ul> <h2 id="十一、添加图片"><a href="#十一、添加图片" aria-hidden="true" class="header-anchor">#</a> 十一、添加图片</h2> <h3 id="_11-1-drawimage-添加图片"><a href="#_11-1-drawimage-添加图片" aria-hidden="true" class="header-anchor">#</a> 11.1  <code>drawImage()</code> 添加图片</h3> <p>三种用法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span>sx<span class="token punctuation">,</span>sy<span class="token punctuation">,</span>sw<span class="token punctuation">,</span>sh<span class="token punctuation">,</span>dx<span class="token punctuation">,</span>dy<span class="token punctuation">,</span>dw<span class="token punctuation">,</span>dh<span class="token punctuation">)</span>
</code></pre></div><ul><li><code>image</code> 为图片对象，必须</li> <li><code>sx</code>，<code>sy</code> 为裁剪开始位置，左上角坐标，可选</li> <li><code>sw</code>，<code>sh</code> 为裁剪宽高，可选</li> <li><code>dx</code>，<code>dy</code> 为绘制起点，左上角坐标，必须</li> <li><code>dw</code>，<code>dh</code> 为自定义的图片宽高，可选</li></ul> <h3 id="_11-2-图片对象"><a href="#_11-2-图片对象" aria-hidden="true" class="header-anchor">#</a> 11.2 图片对象</h3> <ol><li>已存在的 <code>&lt;img&gt;</code> 元素</li></ol> <div class="language-html extra-class"><pre class="language-html"><code>//HTML部分
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>images/cat.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
//javascript部分
window.onload = function() {
  .
  .
  var cat = document.getElementById('cat');
  context.drawImage(cat,0,0); 
}
</code></pre></div><p>在 <code>window.onload</code> 事件处理器中，获取已有图片对象，然后在 <code>canvas</code> 中安全绘制图片。</p> <ol start="2"><li>自己创建的图片对象</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cat<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;images/cat.png&quot;</span><span class="token punctuation">;</span>
cat<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>cat<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>创建图片对象，然后在 cat.onload 事件处理器中安全地把图片绘制在 <code>canvas</code> 中。</p> <h2 id="十二、特殊样式"><a href="#十二、特殊样式" aria-hidden="true" class="header-anchor">#</a> 十二、特殊样式</h2> <h3 id="_12-1-shadowcolor-阴影颜色"><a href="#_12-1-shadowcolor-阴影颜色" aria-hidden="true" class="header-anchor">#</a> 12.1 <code>shadowColor</code> 阴影颜色</h3> <p>设置或返回用于阴影的颜色</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>shadowColor<span class="token operator">=</span>color<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>color</code> 用于阴影的 CSS 颜色值。默认值是 #000000。</li></ul> <h3 id="_12-2-shadowblur-阴影模糊程度"><a href="#_12-2-shadowblur-阴影模糊程度" aria-hidden="true" class="header-anchor">#</a> 12.2 <code>shadowBlur</code> 阴影模糊程度</h3> <p>设置或返回用于阴影的模糊级别</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>shadowBlur<span class="token operator">=</span>number<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>number</code> 阴影的模糊级数</li></ul> <h3 id="_12-3-shadowoffsetx-阴影水平偏移"><a href="#_12-3-shadowoffsetx-阴影水平偏移" aria-hidden="true" class="header-anchor">#</a> 12.3 <code>shadowOffsetX</code> 阴影水平偏移</h3> <p>设置或返回阴影距形状的水平距离</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>shadowOffsetX<span class="token operator">=</span>number<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>number</code> 正值或负值，定义阴影与形状的水平距离。</li></ul> <h3 id="_12-4-shadowoffsety-阴影垂直偏移"><a href="#_12-4-shadowoffsety-阴影垂直偏移" aria-hidden="true" class="header-anchor">#</a> 12.4 <code>shadowOffsetY</code> 阴影垂直偏移</h3> <p>设置或返回阴影距形状的垂直距离</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>shadowOffsetY<span class="token operator">=</span>number<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>number</code> 正值或负值，定义阴影与形状的垂直距离</li></ul> <h3 id="_12-5-createpattern-重复"><a href="#_12-5-createpattern-重复" aria-hidden="true" class="header-anchor">#</a> 12.5 <code>createPattern()</code>  重复</h3> <p>在指定的方向内重复指定的元素。</p> <p>元素可以是图片、视频，或者其他 canvas 元素。
被重复的元素可用于绘制/填充矩形、圆形或线条等等。</p> <div class="language- extra-class"><pre class="language-text"><code>context.createPattern(image,&quot;repeat|repeat-x|repeat-y|no-repeat&quot;);
</code></pre></div><ul><li><code>image</code> 规定要使用的图片、画布或视频元素。</li> <li><code>repeat</code> 默认。该模式在水平和垂直方向重复。</li> <li><code>repeat-x</code> 该模式只在水平方向重复。</li> <li><code>repeat-y</code> 该模式只在垂直方向重复。</li> <li><code>no-repeat</code> 该模式只显示一次（不重复）。</li></ul> <h3 id="_12-6-createlineargradient-创建线性渐变"><a href="#_12-6-createlineargradient-创建线性渐变" aria-hidden="true" class="header-anchor">#</a> 12.6 <code>createLinearGradient()</code> 创建线性渐变</h3> <p>调用 <code>createLinearGradient()</code> 方法创建线性渐变</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">createLinearGradient</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span>y0<span class="token punctuation">,</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>表示沿直线从（x0,y0)到(x1,y1)绘制渐变。</p> <p>如水平渐变：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> my_gradient <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>设置两个 <code>y</code> 值为 0，渐变会沿水平从左到右。</p> <blockquote><p><strong>注意</strong>：创建渐变需要赋给一个变量，通过这个变量设置色标</p></blockquote> <h3 id="_12-7-createradialgradient-创建径向渐变"><a href="#_12-7-createradialgradient-创建径向渐变" aria-hidden="true" class="header-anchor">#</a> 12.7 <code>createRadialGradient()</code> 创建径向渐变</h3> <p>调用 <code>createRadialGradient()</code> 方法创建径向渐变</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">createRadialGradient</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span>y0<span class="token punctuation">,</span>r0<span class="token punctuation">,</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>r1<span class="token punctuation">)</span>
</code></pre></div><p>表示沿着两个圆之间的锥面绘制渐变。
前三个参数代表开始圆，后三个参数表示结束圆。</p> <h3 id="_12-8-addcolorstop-添加色标"><a href="#_12-8-addcolorstop-添加色标" aria-hidden="true" class="header-anchor">#</a> 12.8 <code>addColorStop()</code> 添加色标</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">addColorStop</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>index</code> 渐变位置，可以在 0 - 1 之间取任意值</li> <li><code>color</code> 渐变颜色，关键字及十六进制颜色要添加引号</li></ul> <blockquote><p><strong>注意</strong>：这个方法属于创建的渐变对象，也就是前面创建渐变时的变量。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>my_gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;block&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
my_gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_12-9-绘制渐变"><a href="#_12-9-绘制渐变" aria-hidden="true" class="header-anchor">#</a> 12.9 绘制渐变</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> my_gradient<span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">225</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>将填充颜色设置为创建的渐变</li> <li>填充所需要的图形</li></ul> <h2 id="十三、转换"><a href="#十三、转换" aria-hidden="true" class="header-anchor">#</a> 十三、转换</h2> <p>转换都应该放在绘制之前</p> <h3 id="_13-1-scale-缩放"><a href="#_13-1-scale-缩放" aria-hidden="true" class="header-anchor">#</a> 13.1 scale() 缩放</h3> <p>缩放当前绘图至更大或更小</p> <blockquote><p><strong>注意</strong>：如果您对绘图进行缩放，所有之后的绘图也会被缩放。定位也会被缩放，线条大小也会被缩放。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scalewidth<span class="token punctuation">,</span>scaleheight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>scalewidth</code> 缩放当前绘图的宽度 (1=100%, 0.5=50%, 2=200%, 依次类推)</li> <li><code>scaleheight</code> 缩放当前绘图的高度 (1=100%, 0.5=50%, 2=200%, etc.)</li></ul> <h3 id="_13-2-rotate-旋转"><a href="#_13-2-rotate-旋转" aria-hidden="true" class="header-anchor">#</a> 13.2 rotate() 旋转</h3> <p>旋转当前绘图</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>conntext<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>angle</code> 旋转角度，以弧度计。</li></ul> <p>将角度转换为弧度，请使用 <code>degrees*Math.PI/180</code> 公式进行计算。</p> <h3 id="_13-3-translate-改变原点坐标"><a href="#_13-3-translate-改变原点坐标" aria-hidden="true" class="header-anchor">#</a> 13.3 translate() 改变原点坐标</h3> <p>重新映射画布上的 (0,0) 位置，改变坐标原点的位置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>x</code> 添加到水平坐标上的值</li> <li><code>y</code> 添加到垂直坐标上的值</li></ul> <p>当您在 <code>translate()</code> 之后调用诸如 <code>fillRect()</code> 之类的方法时，值会添加到 <code>x</code> 和 <code>y</code> 坐标值上。，即后面的绘图涉及到坐标都会在此基础上增加值。
<img src="http://upload-images.jianshu.io/upload_images/7295449-8a0b5aa566c0cc89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <h3 id="_13-4-transform-变换矩阵"><a href="#_13-4-transform-变换矩阵" aria-hidden="true" class="header-anchor">#</a> 13.4 transform() 变换矩阵</h3> <p>画布上的每个对象都拥有一个当前的变换矩阵。
<code>transform()</code> 方法替换当前的变换矩阵。</p> <p>它以下面描述的矩阵来操作当前的变换矩阵：</p> <div class="language-mathematica extra-class"><pre class="language-text"><code>a  c  e
b  d  f
0  0  1
</code></pre></div><p>也就是说，<code>transform()</code> 允许您缩放、旋转、移动并倾斜当前的环境。</p> <blockquote><p><strong>注意</strong>：该变换只会影响 <code>transform()</code> 方法调用之后的绘图。
前面的 <code>rotate()</code>, <code>scale()</code>, <code>translate()</code>, <code>transform()</code> 方法都会影响到当前的 <code>transform()</code>。
例如：如果您已经将绘图设置为放到两倍，则 <code>transform()</code> 方法会把绘图放大两倍，您的绘图最终将放大四倍。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>a</code> 水平缩放绘图</li> <li><code>b</code> 水平倾斜绘图</li> <li><code>c</code> 垂直倾斜绘图</li> <li><code>d</code> 垂直缩放绘图</li> <li><code>e</code> 水平移动绘图</li> <li><code>f</code> 垂直移动绘图</li></ul> <h3 id="_13-5-settransform"><a href="#_13-5-settransform" aria-hidden="true" class="header-anchor">#</a> 13.5 setTransform()</h3> <p>将当前转换重置为单位矩阵。然后以同样的参数运行 <code>transform()</code>，这样就可以不受前面的影响了。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>a</code> 水平缩放绘图，默认值为 1</li> <li><code>b</code> 水平倾斜绘图，默认值为 0</li> <li><code>c</code> 垂直倾斜绘图，默认值为 0</li> <li><code>d</code> 垂直缩放绘图，默认值为 1</li> <li><code>e</code> 水平移动绘图，默认值为 0</li> <li><code>f</code> 垂直移动绘图，默认值为 0</li></ul> <p>所以矩阵默认为单位矩阵：</p> <div class="language-mathematica extra-class"><pre class="language-text"><code>1  0  0
0  1  0
0  0  1
</code></pre></div><h3 id="_13-6-save-、-restore"><a href="#_13-6-save-、-restore" aria-hidden="true" class="header-anchor">#</a> 13.6 save()、 restore()</h3> <ul><li><code>save()</code> 保存当前环境的状态
<ul><li>原点位置</li> <li>缩放大小</li> <li>旋转</li> <li>矩阵变换</li> <li>裁剪块</li></ul></li> <li><code>restore()</code>	返回之前保存过的路径状态和属性</li></ul> <h2 id="十四-imagedata-对象"><a href="#十四-imagedata-对象" aria-hidden="true" class="header-anchor">#</a> 十四 <code>ImageData</code> 对象</h2> <p>对于 <code>ImageData</code> 对象中的每个像素，都存在着四方面的信息，即 RGBA 值：</p> <ul><li>R - 红色 (0-255)</li> <li>G - 绿色 (0-255)</li> <li>B - 蓝色 (0-255)</li> <li>A - alpha 通道 (0-255; 0 是透明的，255 是完全可见的)</li></ul> <p>因此 ，<code>transparent black</code> 表示 <code>(0,0,0,0)</code>。</p> <p><code>color/alpha</code> 以数组形式存在，并且既然数组包含了每个像素的四条信息，数组的大小是 <code>ImageData</code> 对象的四倍。获得数组大小的办法，就是使用 <code>ImageDataObject.data.length</code></p> <p>包含 <code>color/alpha</code> 信息的数组存储于 <code>ImageData</code> 对象的 <code>data</code> 属性中。</p> <h3 id="_14-1-createimagedata-创建-imagedata-对象"><a href="#_14-1-createimagedata-创建-imagedata-对象" aria-hidden="true" class="header-anchor">#</a> 14.1 <code>createImageData()</code> 创建 ImageData 对象</h3> <p>创建新的空白 <code>ImageData</code> 对象。</p> <p>有两个版本的 <code>createImageData()</code> 方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//以指定的尺寸（以像素计）创建新的 ImageData 对象</span>
<span class="token keyword">var</span> imgData<span class="token operator">=</span>context<span class="token punctuation">.</span><span class="token function">createImageData</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建与指定的另一个 ImageData 对象尺寸相同的新 ImageData 对象（不会复制图像数据）</span>
<span class="token keyword">var</span> imgData<span class="token operator">=</span>context<span class="token punctuation">.</span><span class="token function">createImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>新对象的默认像素值 <code>transparent black</code>。</p> <ul><li><code>width</code> ImageData 对象的宽度，以像素计。</li> <li><code>height</code> ImageData 对象的高度，以像素计。</li> <li><code>imageData</code> 另一个 ImageData 对象。</li></ul> <h3 id="_14-2-getimagedata-复制画布像素数据"><a href="#_14-2-getimagedata-复制画布像素数据" aria-hidden="true" class="header-anchor">#</a> 14.2 <code>getImageData()</code> 复制画布像素数据</h3> <p>返回 <code>ImageData</code> 对象，该对象拷贝了画布指定矩形的像素数据，进行操作后，通过 <code>putImageData()</code> 将图像数据放回画布</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> imgData <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>x</code>，<code>y</code> 开始复制的左上角位置的坐标</li> <li><code>width</code>，<code>height</code> 将要复制的矩形区域的宽高</li></ul> <h3 id="_14-3-putimagedata-放入像素数据"><a href="#_14-3-putimagedata-放入像素数据" aria-hidden="true" class="header-anchor">#</a> 14.3 <code>putImageData()</code> 放入像素数据</h3> <p>将图像数据（从指定的 ImageData 对象）放回画布上。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imgData<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>dirtyX<span class="token punctuation">,</span>dirtyY<span class="token punctuation">,</span>dirtyWidth<span class="token punctuation">,</span>dirtyHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>imgData</code> 规定要放回画布的 ImageData 对象</li> <li><code>x</code>，<code>y</code> ImageData 对象放置在画布上的位置左上角的坐标，以像素计</li> <li><code>dirtyX</code>，<code>dirtyY</code> 可选。以像素计，在画布上绘制的图像在 ImageData 对象上的位置坐标</li> <li><code>dirtyWidth</code>，<code>dirtyHeight</code> 可选。在画布上绘制图像的宽高</li></ul> <p>后面四个属性相当于裁剪，但是，在画布上，依然是整个 ImageData  对象。
如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> imgData<span class="token operator">=</span>ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imgData<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在画布上放置裁剪部分的位置就变成了（10+20,70+40)，宽高是 30, 10。</p> <blockquote><p><strong>注意</strong>：如果裁剪位置加上裁剪宽度，超出了原来的宽高，超出部分不会绘制</p></blockquote> <h3 id="_14-4-width、height宽高"><a href="#_14-4-width、height宽高" aria-hidden="true" class="header-anchor">#</a> 14.4 <code>width</code>、<code>height</code>宽高</h3> <p>返回 ImageData 对象的宽高，以像素计。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>imgData<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
imgData<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
</code></pre></div><h3 id="_14-5-data-图像数据"><a href="#_14-5-data-图像数据" aria-hidden="true" class="header-anchor">#</a> 14.5 <code>data</code> 图像数据</h3> <p>返回一个对象，该对象包含指定的 ImageData 对象的图像数据。</p> <p>对于 ImageData 对象中的每个像素，都存在着四方面的信息，即 RGBA 值：
R - 红色 (0-255)
G - 绿色 (0-255)
B - 蓝色 (0-255)
A - alpha 通道 (0-255; 0 是透明的，255 是完全可见的)
color/alpha 以数组形式存在，并存储于 ImageData 对象的 data 属性中。</p> <p>将 ImageData 对象中的第一个像素变为红色的语法：</p> <div class="language- extra-class"><pre class="language-text"><code>imgData=ctx.createImageData(100,100);

imgData.data[0]=255;
imgData.data[1]=0;
imgData.data[2]=0;
imgData.data[3]=255;
</code></pre></div><p>将 ImageData 对象中的第二个像素变为绿色的语法：</p> <div class="language- extra-class"><pre class="language-text"><code>imgData=ctx.createImageData(100,100);

imgData.data[4]=0;
imgData.data[5]=255;
imgData.data[6]=0;
imgData.data[7]=255;
</code></pre></div><h2 id="十五、合成"><a href="#十五、合成" aria-hidden="true" class="header-anchor">#</a> 十五、合成</h2> <h3 id="_15-1-globalalpha透明度"><a href="#_15-1-globalalpha透明度" aria-hidden="true" class="header-anchor">#</a> 15.1 <code>globalAlpha</code>	透明度</h3> <p>设置或返回绘图的当前 alpha 或透明值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>globalAlpha<span class="token operator">=</span>number<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>number</code> 透明值。必须介于 0.0（完全透明） 与 1.0（不透明） 之间。</li></ul> <h3 id="_15-2-globalcompositeoperation"><a href="#_15-2-globalcompositeoperation" aria-hidden="true" class="header-anchor">#</a> 15.2 globalCompositeOperation</h3> <p>设置或返回新图像如何绘制到已有的图像上</p> <p>源图像 = 您打算放置到画布上的绘图。
目标图像 = 您已经放置在画布上的绘图。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>context<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">&quot;source-in&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>source-over</code> 默认。在目标图像上显示源图像。</li> <li><code>source-atop</code> 在目标图像顶部显示源图像。源图像位于目标图像之外的部分是不可见的。</li> <li><code>source-in</code> 在目标图像中显示源图像。只有目标图像内的源图像部分会显示，目标图像是透明的。</li> <li><code>source-out</code> 在目标图像之外显示源图像。只会显示目标图像之外源图像部分，目标图像是透明的。</li> <li><code>destination-over</code> 在源图像上方显示目标图像。</li> <li><code>destination-atop</code> 在源图像顶部显示目标图像。源图像之外的目标图像部分不会被显示。</li> <li><code>destination-in</code> 在源图像中显示目标图像。只有源图像内的目标图像部分会被显示，源图像是透明的。</li> <li><code>destination-out</code> 在源图像外显示目标图像。只有源图像外的目标图像部分会被显示，源图像是透明的。</li> <li><code>lighter</code> 显示源图像 + 目标图像。</li> <li><code>copy</code> 显示源图像。忽略目标图像。</li> <li><code>xor</code> 使用异或操作对源图像与目标图像进行组合。</li></ul> <h2 id="十六、兼容ie"><a href="#十六、兼容ie" aria-hidden="true" class="header-anchor">#</a> 十六、兼容IE</h2> <p>虽然 IE 浏览器不支持 <code>canvas API</code>，但是他有一个叫 <code>VML</code> 的技术，可以完成 <code>canvas</code> 元素能做的大部分工作。</p> <h3 id="_16-1-explorercanvas——excanvas-js"><a href="#_16-1-explorercanvas——excanvas-js" aria-hidden="true" class="header-anchor">#</a> 16.1 ExplorerCanvas——excanvas.js</h3> <p>excanvas.js 是一个开源的，采用 Apache license 许可的 javascript 类库，在 IE 中实现了 canvas 的 API。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--[if lt IE9]&gt;
  &lt;script src=&quot;excanvas.js&quot;&gt;&lt;/script&gt;
&lt;![endif]--&gt;</span>
</code></pre></div><h3 id="_16-2-限制"><a href="#_16-2-限制" aria-hidden="true" class="header-anchor">#</a> 16.2 限制</h3> <ul><li>颜色渐变只支持线性渐变</li> <li>模式必须在两个方向上重复</li> <li>不支持裁剪</li> <li>非等比缩放</li> <li>很慢</li></ul> <div class="quote"><main class="text">生命的意义不仅是活着，而是我们给别人的生命带来了何种不同。</main></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/destinytaoer/blog/edit/master/docs/_posts/canvas画布.md" target="_blank" rel="noopener noreferrer">编辑此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新时间: </span> <span class="time">2017-10-31 09:21:00</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/2017/11/canvas%E7%94%BB%E6%97%B6%E9%92%9F/" class="prev">
          Canvas 画时钟
        </a></span> <span class="next"><a href="/2017/10/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83-%EF%BC%88%E4%B8%80%EF%BC%89html/">
          编码规范 （一）HTML（转）
        </a>
        →
      </span></p></div> <!----> </main></div> <footer class="footer post-footer"><p>© 2016-2019 <i class="icon icon-love"></i> destiny</p> <span><i class="icon icon-myself"><span id="busuanzi_container_site_uv" style="display:none">
        访问用户：<span id="busuanzi_value_site_uv"></span></span>人</i> <i class="icon icon-eye"><span id="busuanzi_container_site_pv" style="display:none">
        访问次数：<span id="busuanzi_value_site_pv"></span></span>次
    </i></span></footer> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0f9f7e67.js" defer></script><script src="/assets/js/4.b18b3d4f.js" defer></script><script src="/assets/js/2.ab4e59f5.js" defer></script><script src="/assets/js/1.6965be2c.js" defer></script><script src="/assets/js/17.012dd392.js" defer></script><script src="/assets/js/6.f07dc061.js" defer></script><script src="/assets/js/12.237ff193.js" defer></script>
  </body>
</html>
